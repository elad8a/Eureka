
set(REMOTEUI_PROTO_FILES_LIST "proto/rgorpc.proto")
set(REMOTEUI_AUTOGENERATED_DIR "${EUREKA_AUTOGENERATED_DIRECTORY}")

add_library(
    Eureka.RemoteProto 
    ${REMOTEUI_PROTO_FILES_LIST}
) 

get_target_property(grpc_cpp_plugin_location gRPC::grpc_cpp_plugin LOCATION)
protobuf_generate(TARGET Eureka.RemoteProto LANGUAGE cpp PROTOC_OUT_DIR ${REMOTEUI_AUTOGENERATED_DIR})
protobuf_generate(TARGET Eureka.RemoteProto LANGUAGE grpc GENERATE_EXTENSIONS .grpc.pb.h .grpc.pb.cc PLUGIN "protoc-gen-grpc=${grpc_cpp_plugin_location}" PROTOC_OUT_DIR ${REMOTEUI_AUTOGENERATED_DIR})

set_no_warnings_compiler_flags(Eureka.RemoteProto)   

target_include_directories(
    Eureka.RemoteProto
    PUBLIC
    ${REMOTEUI_AUTOGENERATED_DIR}
)

 target_link_libraries(
     Eureka.RemoteProto 
     PUBLIC
	 gRPC::gpr gRPC::grpc gRPC::grpc++ gRPC::grpc++_alts     
 )


 #file(GLOB_RECURSE REMOTEUI_AUTOGENERATED_FILES "${REMOTEUI_AUTOGENERATED_DIR}/*")
 
#if (MSVC)
#   set_source_files_properties(
#     ${REMOTEUI_AUTOGENERATED_FILES}
#     PROPERTIES
#     COMPILE_FLAGS "/W1"
#   )
#else()
#endif()

#message("ZZZ AUTOGENERATED_FILES = ${REMOTEUI_AUTOGENERATED_FILES}")
#foreach (val ${REMOTEUI_AUTOGENERATED_DIR})
#    message("ZZZ val = ${val}")
#endforeach()
#source_group(autogenerated FILES ${REMOTEUI_AUTOGENERATED_FILES})